{"version":3,"sources":["../../src/EventSourcingDB/applyResult.js"],"names":["applyResult","model","result","rm","set","ins","upd","sav","DEV","rest","Object","keys","forEach","k","item","remove","obj","updateNoTrans"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,MAAMA,WAAW,GAAG,OAAOC,KAAP,EAAcC,MAAd,KAAyB;AAC5C,QAAM;AAACC,IAAAA,EAAD;AAAKC,IAAAA,GAAL;AAAUC,IAAAA,GAAV;AAAeC,IAAAA,GAAf;AAAoBC,IAAAA;AAApB,MAA2BL,MAAjC;;AACA,MAAIM,YAAJ,EAAS;AACR,UAAM;AAACL,MAAAA,EAAD;AAAKC,MAAAA,GAAL;AAAUC,MAAAA,GAAV;AAAeC,MAAAA,GAAf;AAAoBC,MAAAA;AAApB,QAAoCL,MAA1C;AAAA,UAAkCO,IAAlC,4BAA0CP,MAA1C;;AACAQ,IAAAA,MAAM,CAACC,IAAP,CAAYF,IAAZ,EAAkBG,OAAlB,CACCC,CAAC,IAAI,OAAOJ,IAAI,CAACI,CAAD,CAAX,KAAmB,WAAnB,IAAkC,sBAAQA,CAAR,EAAY,OAAMA,CAAE,YAApB,CADxC;AAGA;;AACD,MAAIV,EAAJ,EAAQ,MAAM,0BAAUA,EAAV,EAAcW,IAAI,IAAIb,KAAK,CAACc,MAAN,CAAaD,IAAb,CAAtB,CAAN;AACR,MAAIT,GAAJ,EAAS,MAAM,0BAAUA,GAAV,EAAeW,GAAG,IAAIf,KAAK,CAACG,GAAN,CAAUY,GAAV,EAAe,IAAf,EAAqB,IAArB,CAAtB,CAAN;AACT,MAAIZ,GAAJ,EAAS,MAAM,0BAAUA,GAAV,EAAeY,GAAG,IAAIf,KAAK,CAACG,GAAN,CAAUY,GAAV,EAAe,KAAf,EAAsB,IAAtB,CAAtB,CAAN;AACT,MAAIV,GAAJ,EAAS,MAAM,0BAAUA,GAAV,EAAeU,GAAG,IAAIf,KAAK,CAACgB,aAAN,CAAoBD,GAApB,EAAyB,IAAzB,EAA+B,IAA/B,CAAtB,CAAN;AACT,MAAIT,GAAJ,EAAS,MAAM,0BAAUA,GAAV,EAAeS,GAAG,IAAIf,KAAK,CAACgB,aAAN,CAAoBD,GAApB,EAAyB,KAAzB,EAAgC,IAAhC,CAAtB,CAAN;AACT,CAbD;;eAeehB,W","sourcesContent":["import {unknown, DEV} from '../lib/warning'\nimport {settleAll} from '../lib/settleAll'\n\nconst applyResult = async (model, result) => {\n\tconst {rm, set, ins, upd, sav} = result\n\tif (DEV) {\n\t\tconst {rm, set, ins, upd, sav, ...rest} = result\n\t\tObject.keys(rest).forEach(\n\t\t\tk => typeof rest[k] !== 'undefined' && unknown(k, `key ${k} in result`)\n\t\t)\n\t}\n\tif (rm) await settleAll(rm, item => model.remove(item))\n\tif (ins) await settleAll(ins, obj => model.set(obj, true, true))\n\tif (set) await settleAll(set, obj => model.set(obj, false, true))\n\tif (upd) await settleAll(upd, obj => model.updateNoTrans(obj, true, true))\n\tif (sav) await settleAll(sav, obj => model.updateNoTrans(obj, false, true))\n}\n\nexport default applyResult\n"],"file":"applyResult.js"}